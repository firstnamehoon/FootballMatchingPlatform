<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kosta.project.repository.TeamsMapper">
	<!-- 팀 시퀀스 가져오기(팀 매칭 신청 할 때), 팀장 여부 확인 할 때 -->
	<select id="selectTeamSeq" resultType="java.lang.Integer" parameterType="java.lang.String">
		SELECT team_seq as teamSeq FROM teams 
		WHERE leader_id = #{userId};
	</select>
	<!-- 팀원 수 확인하기 (팀 매칭 신청 할 때) -->
	<select id="selectTeamMemberCount" resultType="java.lang.Integer" parameterType="java.lang.String">
		SELECT COUNT(member_seq) FROM team_members 
		WHERE team_seq = (SELECT team_seq FROM teams WHERE team_name = (SELECT team_name FROM teams WHERE leader_id = #{userId}))
		AND team_member_status = 0;
	</select>
	<!-- 팀원 리스트 조회(팀 매칭 신청 할 때 팀원 정지 여부 확인 위해) -->
	<select id="selectTeamMemberIds" resultType="String" parameterType="java.lang.String">
		SELECT user_id as userId FROM team_members
		WHERE team_seq = (SELECT team_seq FROM teams 
		WHERE team_name = (SELECT team_name FROM teams WHERE leader_id = #{userId}))
		AND team_member_status = 0;
	</select>
</mapper>