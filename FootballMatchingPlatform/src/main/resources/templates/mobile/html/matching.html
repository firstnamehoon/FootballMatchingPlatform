<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title></title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="../css/common.css">
</head>
<style>









/* 버튼 공통 */
.btn-setting{
    border-radius: 20px;
    border-color: transparent;
    height: 1.8rem;
}


/* ********** 캘린더 ********* */
.calendar-container {
    /* display: flex;
    flex-direction: column;
    align-items: center; */
    width: 95%;
    margin: 0.5rem 0;
  }

  .calendar-header {
    display: flex;
    justify-content: end;
    align-items: center;
    margin-bottom: 10px;
  }

  .calendar-nav{
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5rem 0;
  }

  .year-month{
    font-size: 1.1rem;
  }

  .calendar-nav-btn{
    width: 1.3rem;
    height: 1.3rem;
    text-align: center;
  }

  #my-matching-list-btn{
    color: #333333;
    background: #EBEBEB;
    font-size: 0.9rem;
  }

  .calendar-days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding-bottom: 0.3rem;
  }

  .day {
    text-align: center;
}

.sun{
    color: #FF7D7D;
}

.sat{
    color: #7684FF;
}

.calendar-dates {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
  }

  .date-wrapper{
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
  }

  .date {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5rem 0;
    width: 2rem;
    height: 2rem;
  }

  .today{
    background: #555555;
    color: #ffffff;
    border-radius: 50%;
    border-width: 0.1rem;
    /* border-top: 0.1rem; */
    box-sizing: border-box;
  }

  .matching-date{
    width: 0.4rem;
    height: 0.4rem;

    background: #80D87E;
    border-radius: 100px;

  }

  /* .date:hover {
    background-color: #f5f5f5;
  } */


.click-date{
    background: #73A772;
    border-radius: 50%;
    border-width: 0.1rem;
    /* border-top: 0.1rem; */
    box-sizing: border-box;
}




















#btnTimes button{
	border-radius:3rem;
	background-color:#828282;
	color:#FFFFFF;
	width:4rem;
	height:2rem;
	font-size:0.8rem;
	display: flex;
	align-items:center;
	justify-content: center;
}




#applyTypeBtn{
	border-radius:3rem;
	background-color:#828282;
	color:#FFFFFF;
	width:4rem;
	height:2rem;
	font-size:0.8rem;
	display: flex;
	align-items:center;
	justify-content: center;
}

#showBtn{
	border-radius:3rem;
	background-color:#73A772;
	color:#FFFFFF;
	width:7.5rem;
	height:3rem;
	font-size:1rem;
	position:fixed;
	top:85%;
	left:35%;
	z-index: 1000;
}




p{
	font-size:1rem;
}

.timeZone{
	white-space:nowrap;
}


.matchingDate{
	white-space:nowrap;
	
}

.matchingDateBtn{
	border-radius:6rem;
	background-color:#FFFFFF;
	color:#626262;
	width:2rem;
	height:2rem;
	font-size:0.8rem;
	border-color:#626262;
	display: flex;
	align-items:center;
	justify-content: center;
}

    #matchingDateBtns {
      font-size: 0;
    }
    #matchingDateBtns li {
      display: inline-block;
      margin-left: -1px;
    }
    #matchingDateBtns li:first-child {
      margin-left: 0;
    }

    #btnTimes {
      font-size: 0;
    }
    #btnTimes li {
      display: inline-block;
      margin-left: -1px;
    }
    #btnTimes li:first-child {
      margin-left: 0;
    }

    #applyTypeBtns {
      font-size: 0;
    }
    #applyTypeBtns li {
      display: inline-block;
      margin-left: -1px;
    }
    #applyTypeBtns li:first-child {
      margin-left: 0;
    }

    body {
      font-size: 16px;
    }


#backBtn{
	font-size:1rem;
}

#frontBtn{
	font-size:1rem;
}

    .matchingDateBtn:hover,
    .matchingDateBtn.active {
      background: #73a772;
    }

    #applyTypeBtn:hover,
    #applyTypeBtn.active2 {
      background: #73a772;
    }


#btnTime:hover, #btnTime.active3 {
	background: #73A772;
}
#btnTime1:hover, #btnTime1.active4 {
	background: #73A772;
}
#btnTime2:hover, #btnTime2.active5 {
	background: #73A772;
}
#btnTime3:hover, #btnTime3.active6 {
	background: #73A772;
}
#btnTime4:hover, #btnTime4.active7 {
	background: #73A772;
}
#btnTime5:hover, #btnTime5.active8 {
	background: #73A772;
}
#btnTime6:hover, #btnTime6.active9 {
	background: #73A772;
}




.toast {
      position: fixed;
      top: 85%;
      right: 1%;
      background-color: #333;
      color: white;
      padding: 1rem 2rem;
      border-radius: 1rem;
      opacity: 0;
      transition: opacity 1s ease;
      
    }

    .toast.show {
      opacity: 1;
      z-index: 2001;
      background-color: #AAAAAA;
    }

    .toast1 {
      position: fixed;
      top: 85%;
      right: 1%;
      background-color: #333;
      color: white;
      padding: 1rem 7.1rem;
      border-radius: 1rem;
      opacity: 0;
      transition: opacity 1s ease;
      
    }

    .toast1.show1 {
      opacity: 1;
      z-index: 2000;
      background-color: #AAAAAA;
    }


</style>
<body>
    <!-- 모바일 컨테이너 -->
    <div id="mobile-container">
        <!-- 헤더 -->
        <header></header>
         <!-- 컨텐츠 컨테이너 -->
        <div id="container">
<div class = "container">
	
	<div class = "matchingDate">

	  <ul id = "matchingDateBtns">
	  	<button type = "button" id="backBtn" class = "btn"><</button>
		<li><button type = "button" class = "matchingDateBtn btn m-2 p-3" onclick="change_btn(event)" value="2024-06-27">27</button></li>
		<li><button type = "button" class = "matchingDateBtn btn m-2 p-3" onclick="change_btn(event)" value="2024-06-28">28</button></li>
		<li><button type = "button" class = "matchingDateBtn btn m-2 p-3" onclick="change_btn(event)" value="2024-06-29">29</button></li>
		<li><button type = "button" class = "matchingDateBtn btn m-2 p-3" onclick="change_btn(event)" value="2024-06-30">30</button></li>
		<li><button type = "button" class = "matchingDateBtn btn m-2 p-3" onclick="change_btn(event)" value="2024-07-01">1</button></li>
		<button type = "button" id="frontBtn" class = "btn">></button> 	
	  </ul>
	






	  <div class="calendar-container">
		<div class="calendar-header">
			<div class="calendar-nav">
				<img class="calendar-nav-btn" id="prevBtn" src="../img/left arrow.svg" alt="이전 달 버튼"></img>
				<div class="year-month"></div>
				<img class="calendar-nav-btn" id="nextBtn" src="../img/right arrow.svg" alt="다음 달 버튼"></img>
			</div>
			<button class="btn-setting" id="my-matching-list-btn">일정 전체보기</button>
		</div>
		<div class="main">
			<div class="calendar-days">
				<div class="day sun">일</div>
				<div class="day">월</div>
				<div class="day">화</div>
				<div class="day">수</div>
				<div class="day">목</div>
				<div class="day">금</div>
				<div class="day sat">토</div>
			</div>
			<div class="calendar-dates" id="calendarDates"></div>
		</div>
	</div>












	</div>
	<div class = "applyType mt-4">
		<p>신청 유형</p>
		<ul id = "applyTypeBtns">
			<li><button type = "button" id = "applyTypeBtn" class = "btn m-1 p-2" onclick="change_btn2(event)" value="개인">개인</button></li>
			<li><button type = "button" id = "applyTypeBtn" class = "btn m-1 p-2" onclick="change_btn2(event)" value="팀">팀</button></li>
		</ul>
	</div>
	<div class = "timeZone mt-5">
		<p>시간</p>
		<ul id = "btnTimes">
		<li><button type = "button" id="btnTime" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=8>08~10</button></li>
		<li><button type = "button" id="btnTime1" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=10>10~12</button></li>
		<li><button type = "button" id="btnTime2" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=12>12~14</button></li>
		<li><button type = "button" id="btnTime3" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=14>14~16</button></li> <br>
		<li><button type = "button" id="btnTime4" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=16>16~18</button></li>
		<li><button type = "button" id="btnTime5" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=18>18~20</button></li>
		<li><button type = "button" id="btnTime6" class = "btn m-1 p-2" onclick="changeButtonColors(this)" value=20>20~22</button></li>
		</ul>
	</div>
	
	<button type="button" id = "showBtn">조회</button>



	<div class="toast" id="toast">조회가 불가능합니다.</div>
	<div class="toast1" id="toast1">팀원이 부족합니다.</div>
</div>

</div>
	
<!-- 하단 메뉴바 -->
<nav></nav>


</div>

<script type="text/javascript">

$(document).ready(function(){
        $('header').load('./common/header_back.html', function(){ // 뒤로가기 필요한 페이지는 header_back, 아닌 페이지는 header 사용해주세욤
            $('#page-name').text('페이지 이름'); // 해당 페이지 이름 넣어주세욤 ex) 마이페이지
            $('#user-tier').text('A'); // 나중에 세션에서 usertier 구해서 넣기
        });
        $('nav').load('./common/nav.html');
    });











	const date = new Date();
let currentYear = date.getFullYear();
let currentMonth = date.getMonth();
let currentDate = date.getDate();

const calendarDates = document.querySelector("#calendarDates");
const prevBtn = document.querySelector("#prevBtn");
const nextBtn = document.querySelector("#nextBtn");

const dateRemember = '0000-00-00';


function renderCalendar() {
    document.querySelector('.year-month').textContent = `${currentYear}년 ${currentMonth + 1}월`;

    const firstDayOfMonth = new Date(currentYear, currentMonth, 1); // 첫번째 날 불러오기
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();   // 날짜수 불러오기

    const startDayOfWeek = firstDayOfMonth.getDay();

    calendarDates.innerHTML = ""; // 일자 비우기

    // 빈 날짜(이전 달)
    for (let i = 0; i < startDayOfWeek; i++) {
        const emptyDate = document.createElement("div");
        emptyDate.classList.add("date", "empty");
        calendarDates.appendChild(emptyDate);
    }

    // 현재 달의 날짜
    for (let i = 1; i <= daysInMonth; i++) {
        
        // date-wrapper
        const dateWrapperElement = document.createElement("div");
        dateWrapperElement.classList.add("date-wrapper");
        
        // 날짜
        const dateElement = document.createElement("div");
        dateElement.classList.add("date");
        dateElement.setAttribute('id',currentYear + "-" + parseInt(currentMonth+1) + "-" + i );
        dateElement.textContent = i;
        if(i==currentDate) dateElement.classList.add("today");
        
        // 매칭 여부
        const matchingDateElement = document.createElement("div");
    
        // 매칭 정보 있는 날이면 등록, 매칭 상태 불러와서 매칭 상태에 따라 다른 클래스 지정
        if(i == 5)
        matchingDateElement.dataset.matchingStatus = "2";
        
        dateWrapperElement.appendChild(dateElement);
        dateWrapperElement.appendChild(matchingDateElement);
        calendarDates.appendChild(dateWrapperElement);
    }
}

renderCalendar();

// 이전 달 버튼 클릭 시
prevBtn.addEventListener("click", () => {
    currentMonth--;
    if (currentMonth < 0) {
      currentMonth = 11;
      currentYear--;
    }
    renderCalendar();
  });

  // 다음 달 버튼 클릭 시
  nextBtn.addEventListener("click", () => {
    currentMonth++;
    if (currentMonth > 11) {
      currentMonth = 0;
      currentYear++;
    }
    renderCalendar();
  });

  // 날짜 클릭 시
  $(".calendar-dates").on("click", ".date-wrapper", function () {
    $('.click-date').removeClass('click-date');
    $(this).find('.date').addClass('click-date'); // find -> 자식 요소 찾기
    
    // 클릭한 날짜 불러오기
    console.log($(this).find('.date').attr("id"));
	// const clickedDate = $(this).find('.date').attr("id");
	// $(this).find('.date').data("id", clickedDate);

	dateRemember = $(this).attr('id');


    // 매칭이 있는 경우 해당 날짜 매칭 정보들 불러오기


});


















	var checkNumber = 0;
	var selectedDate = null;
	function change_btn(e) {
	var btns = document.querySelectorAll(".matchingDateBtn");
	btns.forEach(function(btn, i) {
		if(e.currentTarget == btn) {
			btn.classList.add("active");
		}
		else {
			btn.classList.remove("active");
		}
	});
	console.log( e.currentTarget.value );
	selectedDate = e.currentTarget.value;
	}
	
	
	var teamOrSolo = null;
	function change_btn2(e2) {
	var btns1 = document.querySelectorAll("#applyTypeBtn");
	btns1.forEach(function(btn1, i) {
		if(e2.currentTarget == btn1) {
			btn1.classList.add("active2");
		}
		else {
			btn1.classList.remove("active2");
		}
	});
	console.log( e2.currentTarget.value );
	teamOrSolo = e2.currentTarget.value;
	}
	
	
	function changeButtonColors(button) {
  const computedStyle = window.getComputedStyle(button);
  const buttonsColor = computedStyle.backgroundColor;
  selectedButton = button;
  console.log(buttonsColor);
  if (buttonsColor == 'rgb(115, 167, 114)') {
    button.style.backgroundColor = '#828282';
  } else {
    button.style.backgroundColor = '#73A772';
  }
}  
	
	
const searchButton = document.getElementById('showBtn');
const selectedButtons = document.querySelectorAll('#btnTimes button');  
const selectedTierButtons = document.querySelectorAll('#btnTimes button'); 

searchButton.addEventListener('click', function() {
const selectedList = [];    
selectedTierButtons.forEach(function(button, i) {
//i = 0;
if (button.style.backgroundColor == 'rgb(115, 167, 114)') {
	// 검색하고자하는 정보입니다
	selectedList[i] = button.value;
	console.log(i+'i : '+selectedList[i]);
	//console.log(button.value);  // 검색 시에 이 값 그대로 controller에 날려주면 됩니다
}
//i++;
} 
);


checkNumber=0;
selectedButtons.forEach(button => {

if (button.style.backgroundColor == 'rgb(115, 167, 114)') {
	checkNumber++;
	console.log(checkNumber + dateRemember + teamOrSolo + button.value);  // 검색 시에 이 값 그대로 controller에 날려주면 됩니다
	
}
 
});

// 팀 멤버 수
var teamMember = 5;

if(checkNumber == 0){
	toast.classList.add('show');
	setTimeout(function() {
        toast.classList.remove('show');
	}, 1000);
} else {
	
if(teamOrSolo == '팀' && teamMember < 5){
	toast1.classList.add('show1');
	setTimeout(function() {
        toast1.classList.remove('show1');
	}, 1000);
} 

}




});

// const selectedTimes = document.querySelectorAll('#btnTimes button');  

// document.getElementById('showBtn').addEventListener('click', function() {
// 	if(selectedDate == null || teamOrSolo == null){
		

// 	}
// });


	
</script>  

</body>
</html>
